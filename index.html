<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電気・電子回路 インタラクティブ学習</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-6">
            <h1 class="text-4xl font-bold text-blue-700">電気・電子回路 インタラクティブ学習</h1>
            <p class="text-lg text-gray-600 mt-2">工業高校1年生向け基礎講座</p>
        </header>

        <!-- Navigation: data-section属性を追加して、JSでの制御を容易にします -->
        <nav class="flex flex-wrap justify-center bg-white rounded-lg shadow-md mb-8 sticky top-2 z-50">
            <button class="nav-tab active" data-section="home" onclick="showSection('home')">🏠<span class="hidden md:inline"> ホーム</span></button>
            <button class="nav-tab" data-section="electric" onclick="showSection('electric')">⚡<span class="hidden md:inline"> 電気回路</span></button>
            <button class="nav-tab" data-section="digital" onclick="showSection('digital')">🔢<span class="hidden md:inline"> デジタル基礎</span></button>
            <button class="nav-tab" data-section="logic" onclick="showSection('logic')">🤖<span class="hidden md:inline"> 論理回路</span></button>
            <button class="nav-tab" data-section="circuit-problems" onclick="showSection('circuit-problems')">📝<span class="hidden md:inline"> 回路問題</span></button>
            <button class="nav-tab" data-section="timing-problems" onclick="showSection('timing-problems')">📈<span class="hidden md:inline"> チャート問題</span></button>
        </nav>

        <!-- Home Section -->
        <main id="section-home" class="content-section active">
             <div class="main-card">
                <h2 class="section-title">はじめに：すべての基本「電子」</h2>
                <div class="flex flex-col md:flex-row gap-6 items-center mt-6">
                    <div class="text-8xl">⚛️</div>
                    <div>
                        <p class="mb-4 text-gray-700 leading-relaxed">私たちの身の回りにあるすべての物質は、「原子」というとても小さな粒からできています。そして、その原子の中心には「原子核」があり、その周りをいくつかの「電子（でんし）」が飛び回っています。</p>
                        <p class="mb-4 text-gray-700 leading-relaxed">電子は、マイナス（－）の電気を持つ性質があります。普段は原子核のプラス（＋）の電気に引きつけられて安定していますが、外部からエネルギーが加わると、原子から飛び出して自由に動き回ることができます。この自由に動き回れる電子を「自由電子」と呼びます。</p>
                        <h3 class="text-xl font-bold mb-2 text-gray-800">電流の正体</h3>
                        <p class="text-gray-700 leading-relaxed">導線（電線）に電圧をかけると、この自由電子たちが一斉に同じ方向に動き出します。この<strong class="text-blue-600">「電子の流れ」こそが、「電流」の正体</strong>です。</p>
                         <p class="mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded-r-lg"><strong>豆知識：</strong> 電流の向きは「プラス(＋)からマイナス(－)」と決められていますが、電子の実際の流れは「マイナス(－)からプラス(＋)」です。これは、電流の向きを決めた後に、電子の存在が発見されたためです。</p>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Electric Circuits Section -->
        <main id="section-electric" class="content-section">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Shunt/Multiplier Card -->
                <div class="main-card">
                    <h2 class="section-title">分流器・倍率器 計算機</h2>
                    <div class="mt-6">
                        <div class="mb-4 border-b border-gray-200">
                            <nav class="flex -mb-px">
                                <button id="subtab-shunt" class="sub-tab active" onclick="switchMeter('shunt')">分流器</button>
                                <button id="subtab-multiplier" class="sub-tab" onclick="switchMeter('multiplier')">倍率器</button>
                            </nav>
                        </div>
                        <div id="shunt-calc">
                             <div class="space-y-4">
                                <div>
                                    <label class="font-semibold text-gray-700">電流計の内部抵抗 (rA) [Ω]</label>
                                    <input type="number" id="shunt-ra" value="9" class="w-full p-2 border rounded-md mt-1">
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">測定範囲を何倍にしたいか (n)</label>
                                    <input type="number" id="shunt-n" value="10" class="w-full p-2 border rounded-md mt-1">
                                </div>
                                <button onclick="calculateShunt()" class="action-btn w-full">計算</button>
                                <div id="shunt-result" class="text-xl font-bold text-blue-700 text-center mt-2 p-4 bg-blue-50 rounded-lg"></div>
                            </div>
                        </div>
                        <div id="multiplier-calc" class="hidden">
                              <div class="space-y-4">
                                <div>
                                    <label class="font-semibold text-gray-700">電圧計の内部抵抗 (rV) [kΩ]</label>
                                    <input type="number" id="multiplier-rv" value="10" class="w-full p-2 border rounded-md mt-1">
                                </div>
                                <div>
                                    <label class="font-semibold text-gray-700">測定範囲を何倍にしたいか (n)</label>
                                    <input type="number" id="multiplier-n" value="10" class="w-full p-2 border rounded-md mt-1">
                                </div>
                                <button onclick="calculateMultiplier()" class="action-btn w-full">計算</button>
                                <div id="multiplier-result" class="text-xl font-bold text-blue-700 text-center mt-2 p-4 bg-blue-50 rounded-lg"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Wheatstone Bridge Card -->
                <div class="main-card">
                    <h2 class="section-title">ホイートストンブリッジ</h2>
                    <div class="mt-6">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div><label>R1 [Ω]: <input type="number" id="bridge-r1" value="6" class="w-full p-2 border rounded-md"></label></div>
                            <div><label>R2 [Ω]: <input type="number" id="bridge-r2" value="4" class="w-full p-2 border rounded-md"></label></div>
                            <div><label>R3 [Ω]: <input type="number" id="bridge-r3" value="2" class="w-full p-2 border rounded-md"></label></div>
                            <div class="p-4 bg-green-50 rounded-lg text-center flex flex-col justify-center">
                                <p class="font-semibold text-green-800">平衡に必要なRx</p>
                                <p id="bridge-ideal-rx" class="text-xl font-bold text-green-700"></p>
                            </div>
                        </div>
                         <div class="mb-4">
                            <label for="bridge-rx-slider" class="font-semibold">あなたのRx調整値: <span id="bridge-rx-value" class="font-bold text-blue-600">1.00</span> Ω</label>
                            <input type="range" id="bridge-rx-slider" min="0" max="10" step="0.01" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="chart-container h-48">
                            <canvas id="bridgeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Digital Fundamentals Section -->
        <main id="section-digital" class="content-section">
            <div class="grid grid-cols-1 gap-8">
                <div class="main-card">
                    <h2 class="section-title">進数変換ツール</h2>
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="font-semibold text-gray-700">10進数 (Decimal)</label>
                            <input type="text" id="conv-dec" class="w-full p-2 border rounded-md mt-1 font-mono text-lg" placeholder="例: 13">
                        </div>
                        <div>
                            <label class="font-semibold text-gray-700">2進数 (Binary)</label>
                            <input type="text" id="conv-bin" class="w-full p-2 border rounded-md mt-1 font-mono text-lg" placeholder="例: 1101">
                        </div>
                        <div>
                            <label class="font-semibold text-gray-700">16進数 (Hexadecimal)</label>
                            <input type="text" id="conv-hex" class="w-full p-2 border rounded-md mt-1 font-mono text-lg" placeholder="例: D">
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Logic Circuits Section -->
        <main id="section-logic" class="content-section">
            <div class="main-card">
                <h2 class="section-title">論理ゲート・エクスプローラー</h2>
                <div class="mt-6">
                    <div class="flex flex-wrap gap-2 justify-center mb-6">
                        <button class="logic-gate-btn active" onclick="selectLogicGate('AND')">AND</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('OR')">OR</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('NOT')">NOT</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('NAND')">NAND</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('NOR')">NOR</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('XOR')">XOR</button>
                        <button class="logic-gate-btn" onclick="selectLogicGate('XNOR')">XNOR</button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-bold mb-2 text-gray-800" id="gate-title"></h3>
                            <p class="mb-4 text-gray-600" id="gate-description"></p>
                             <div class="mt-6">
                                <h4 class="font-bold text-lg text-center mb-2">真理値表</h4>
                                <table id="truth-table" class="w-full truth-table"></table>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold mb-2 text-gray-800">タイムチャート</h3>
                            <div class="chart-container h-64 max-h-64">
                                <canvas id="timeChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Circuit Problems Section -->
        <main id="section-circuit-problems" class="content-section">
            <div class="main-card">
                <h2 class="section-title">挑戦！直並列回路マスター</h2>
                <div id="circuit-problem-container" class="mt-6">
                    <p class="text-lg font-semibold mb-2">問題 <span id="circuit-problem-number">1</span></p>
                    <p class="mb-4">以下の回路のAB間の合成抵抗 [Ω] を求めなさい。</p>
                    <div id="circuit-diagram-problem" class="circuit-diagram-problem mb-4 flex justify-center items-center">
                        <!-- Circuit diagram will be rendered here by JS -->
                    </div>
                    <div id="circuit-options-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 my-6">
                        <!-- Options will be generated by JS -->
                    </div>
                    <div class="flex items-center justify-between">
                        <button id="check-circuit-answer-btn" class="action-btn">回答する</button>
                        <div id="circuit-result-message" class="text-lg font-bold"></div>
                        <button id="next-circuit-problem-btn" class="action-btn hidden">次の問題へ</button>
                    </div>
                    <div id="circuit-explanation-container" class="explanation-box mt-6 hidden">
                        <h3 class="font-bold text-lg mb-2">解説</h3>
                        <p id="circuit-explanation-text"></p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Timing Chart Problems Section -->
        <main id="section-timing-problems" class="content-section">
            <div class="main-card">
                <h2 class="section-title">解読！タイムチャートクイズ</h2>
                <div id="timing-problem-container" class="mt-6">
                    <p class="text-lg font-semibold mb-2">問題 <span id="timing-problem-number">1</span></p>
                    <p class="mb-4">下の入力A, Bに対する<strong id="timing-problem-gate-type" class="text-blue-600"></strong>ゲートの出力Yとして、正しいタイムチャートを選択肢①～④から選びなさい。</p>
                    
                    <div class="mb-6">
                        <h3 class="font-bold text-center">入力波形</h3>
                        <div class="chart-container h-48 max-h-48">
                            <canvas id="timing-problem-chart-input"></canvas>
                        </div>
                    </div>

                    <h3 class="font-bold text-center mb-4">選択肢</h3>
                    <div id="timing-options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Options will be generated by JS -->
                    </div>

                    <div class="flex items-center justify-between mt-8">
                        <button id="check-timing-answer-btn" class="action-btn">回答する</button>
                        <div id="timing-result-message" class="text-lg font-bold"></div>
                        <button id="next-timing-problem-btn" class="action-btn hidden">次の問題へ</button>
                    </div>
                    <div id="timing-explanation-container" class="explanation-box mt-6 hidden">
                         <h3 class="font-bold text-lg mb-2">解説</h3>
                        <p id="timing-explanation-text"></p>
                    </div>
                </div>
            </div>
        </main>
    </div>

<script src="script.js" defer></script>
</body>
</html>
